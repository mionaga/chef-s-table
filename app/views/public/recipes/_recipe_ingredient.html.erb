

<div class="recipe_ingredient-fields row align_items_center">
  <!--編集の際dbから削除できるように-->
  <%= f.hidden_field :_destroy %>
  <div class="col">
    <div class="form-group">
      <%= f.label :"[材料]" %>
      <%= f.text_field :name, placeholder: "材料名（必須）", class: 'form-control light-placeholder' %>
    </div>
  </div>
  <div class="col">
    <div class="form-group">
      <%= f.label :"[カテゴリー]" %>
      <%= f.collection_select :category_id, Category.all, :id, :name, include_blank: "選択して下さい" %>
    </div>
  </div>
  <div class="col">
    <div class="form-group">
      <%= f.label :"[分量]" %>
      <%= f.text_field :quantity, placeholder: "分量（必須）", class: 'form-control light-placeholder', style:'width: 255px' %>
    </div>
  </div>
  <div class="col">
    <div class="form-group">
      <div></div>
      <button type="button" class="btn btn-danger remove-recipe_ingredient">
        <i class="fas fa-trash-alt"></i>
      </button>
    </div>
  </div>
</div>


<!--recipeモデルにallow_destroy: trueを持っている必要がある-->
<script data-turbolinks="false">
  $(document).ready(function(){
      // 削除ボタンがクリックされたときの処理
    $(document).on('click', '.remove-recipe_ingredient', function(){
     // クリックされた.削除ボタンに最も近い.ingredient-fieldsを削除する
      $(this).closest('.recipe_ingredient-fields').find("input[name$='[_destroy]']").val('true');
     // そして、そのフィールドを隠す
      $(this).closest('.recipe_ingredient-fields').hide();
    });
  });
</script>

<style>
  #recipe_recipe_ingredients_attributes_0_category_id {
    width: 255px;
  }
</style>